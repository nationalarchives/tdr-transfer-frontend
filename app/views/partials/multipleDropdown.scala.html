@import views.html.partials.inputSingleCheckbox
@import controllers.util.InputNameAndValue
@import views.html.partials.errorMessage
@(fieldId: String,
fieldName: String,
fieldDescription: String,
multiValue: Boolean=false,
options: Seq[InputNameAndValue],
selectedOptions: Seq[InputNameAndValue],
fieldErrors: List[String] = Nil
)(implicit messages: Messages)

<div class="govuk-form-group @{if(fieldErrors.nonEmpty) "govuk-form-group--error" else ""}">
    <fieldset class="govuk-fieldset" aria-describedby="foi-hint">
        <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <h2 class="govuk-fieldset__heading">
                @fieldName
            </h2>
        </legend>
        <div class="govuk-hint">
        @fieldDescription
        </div>
        @errorMessage("foi-exemption-codes", fieldErrors)

        <div class="govuk-checkboxes" data-module="govuk-checkboxes" id="foi-exemption-codes">
            <div class="govuk-grid-row">
        @options.zipWithIndex.map {
            case (foiCode, index) => {
                @if(index == 0 || index % 15 == 0) {<div class="govuk-grid-column-one-third">}
                @{
                    inputSingleCheckbox(
                        s"FoiExemptionCode-$index",
                        Map(
                            Symbol("_label") -> foiCode.name,
                            Symbol("_value") -> foiCode.value,
                            Symbol("_smallCheckbox") -> false,
                            Symbol("_checkedOption") -> (if(selectedOptions.contains(foiCode)) "checked" else ""),
                            Symbol("_dynamicForm") -> true,
                        ),
                        Nil
                    )
                }
                @if((index + 1) % 15 == 0 || index == options.length-1) {</div>}
            }
        }
            </div>
        </div>
    </fieldset>
</div>
