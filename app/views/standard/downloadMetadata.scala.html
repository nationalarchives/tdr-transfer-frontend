@import java.util.UUID
@import views.html.partials.transferReference
@import views.html.partials.notificationBanner
@import views.html.partials.backLink
@(consignmentId: UUID, consignmentRef: String, name: String, blockMetadataReview: Boolean)(implicit messages: Messages, request: RequestHeader)

@main("Download and review metadata", name = name, backLink = Some(backLink(routes.AdditionalMetadataEntryMethodController.additionalMetadataEntryMethodPage(consignmentId).url, "Back")) ) {
  @defining(play.core.PlayVersion.current) { version =>
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-l">Download and review metadata</h1>
      <div class="download-metadata">
        @notificationBanner(
          Messages("notification.savedProgress.title"),
          Messages("notification.savedProgress.heading"),
          Messages("notification.savedProgress.metadataInfo", routes.ViewTransfersController.viewConsignments(1), "View Transfers")
        )
        <p class="govuk-body">
          You can review the metadata added to your records by downloading the CSV file. If you would like to add or amend the metadata, return to the previous step.
        </p>
        <a class="govuk-button govuk-!-margin-bottom-8 govuk-button--secondary" href="/consignment/@consignmentId/additional-metadata/download-metadata/csv">
          <span aria-hidden="true" class="tna-button-icon tna-button-icon--download">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 23 23">
              <path fill="#020202" d="m11.5 16.75-6.563-6.563 1.838-1.903 3.412 3.413V1h2.626v10.697l3.412-3.413 1.837 1.903L11.5 16.75ZM3.625 22c-.722 0-1.34-.257-1.853-.77A2.533 2.533 0 0 1 1 19.375v-3.938h2.625v3.938h15.75v-3.938H22v3.938c0 .722-.257 1.34-.77 1.855a2.522 2.522 0 0 1-1.855.77H3.625Z"/>
            </svg>
          </span>
          Download metadata
        </a>
      </div>
      <div class="govuk-button-group">
      @if(blockMetadataReview) {
          <a class="govuk-button" href="@routes.ConfirmTransferController.confirmTransfer(consignmentId)" role="button" draggable="false" data-module="govuk-button">
            Next
          </a>
        } else {
          <a href="@routes.RequestMetadataReviewController.requestMetadataReviewPage(consignmentId)" role="button" draggable="false" class="govuk-button" data-module="govuk-button">
            Continue
          </a>
        }
      </div>

    </div>

      @transferReference(consignmentRef, isJudgmentUser = false)
    </div>
  }
}
