@(consignments: List[ConsignmentHistory], name: String, email: String)(implicit messages: Messages, request: RequestHeader)

@main("View History", name = name) {
  @defining(play.core.PlayVersion.current) { version =>
    <div class="govuk-width-container ">
        <div class="govuk-grid-row">
          <div class="govuk-grid-column-full">
            <h1 class="govuk-heading-l">Transfer history</h1>
            <p class="govuk-body">View the history of all the consignments you have uploaded and resume incomplete or failed transfers.</p>

            <table class="govuk-table">
              <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                  <th scope="col" class="govuk-table__header">Consignment reference</th>
                  <th scope="col" class="govuk-table__header">Status</th>
                  <th scope="col" class="govuk-table__header">Date of export</th>
                  <th scope="col" class="govuk-table__header">Actions</th>
                </tr>
              </thead>
              <tbody class="govuk-table__body">
                @for(consignment <- consignments) {
                  <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header">
                      <details class="govuk-details" data-module="govuk-details">
                        <summary class="govuk-details__summary">
                          <span class="govuk-details__summary-text">
                          @{consignment.reference}
                          </span>
                        </summary>
                        <div class="govuk-details__text">
                          <p class="govuk-body">Please do not delete the original files you exported until you are notified that your records have been preserved.</p>
                          <ul class="govuk-list govuk-list--bullet">
                            <li>Consignment uploaded by: @email</li>
                            <li>Date started: @consignment.dateStarted</li>
                            <li>Date of export: @consignment.dateOfExport</li>
                            <li>Number of files: @consignment.numberOfFiles records</li>
                          </ul>
                        </div>
                      </details>
                    </th>
                    <td class="govuk-table__cell">
                      <strong class="govuk-tag @if(consignment.status.equals("Exported")){govuk-tag--green} else {govuk-tag--yellow}">
                      @consignment.status
                      </strong>
                    </td>
                    <td class="govuk-table__cell">@{consignment.dateOfExport}</td>
                    <td class="govuk-table__cell"></td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
    </div>
  }
}
